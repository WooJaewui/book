
# 자바 8,9,10,11 무슨 일이 일어나고 있는가 ?

----------------------------------------------------------------------------------------------------------------

> ## 역사의 흐름은 무엇인가 ?

### 자바의 역사.
- java8에서 획기적으로 변화했다.
- 멀티코어 CPU 대중화 -> 멀티 쓰레드로 코드를 구현하면 성능이 좋다. (자바는 단일 쓰레드 환경이다)

### 자바의 멀티 쓰레드.
- 멀티코어 CPU 성능을 제대로 사용하기 위해 병렬 처리하는 방식.
- 자바는 이러한 병렬 실행 환경을 쉽게 관리하고 에러가 덜 발생하는 방향으로 진화하려 노력했다.
- 자바8에서는 병렬 실행을 새롭고 단순한 방식으로 접근할 수 있는 방법을 제공한다. (뒤에서 배움)

### 자바 8의 발전 방향.
1. 간결한 코드.
2. 멀티코어 프로세서의 쉬운 활용.

### 자바 8에서 제공하는 새로운 기술.
1. 스트림 API.
2. 메서드에 코드를 전달하는 기법.
3. 인터페이스의 디폴트 메서드.
> 자바8 기법은 함수형 프로그래밍에서 위력을 발휘한다.

### 스트림.
- 병렬 연산을 지원한다.
- 스트림을 이용하면 에러를 자주 일으키며 멀티코어 CPU를 이용하는 것보다 비용이 훨씬 비싼 synchronized를 사용하지 않아도 된다.

### 이후에 책에 내용들.
- 왜 언어가 진화하는가 ?
- 자바8의 핵심 기능.
- 함수형 프로그래밍.

----------------------------------------------------------------------------------------------------------------

> ## 왜 아직도 자바는 변화하는가 ?

### 자바의 시작.
- 처음부터 많은 유용한 라이브러리를 포함하는 잘 설계된 객체지향 언어로 시작했다.
- 처음부터 스레드와 락을 이용한 소소한 동시성도 지원했다.

### 자바는 어떻게 대중적인 프로그래밍 언어로 성장했는가 ?
1. 캡슐화 덕분에 c에 비해 소프트웨어 엔지니어링적인 문제가 훨씬 적다.
2. 객체지향의 정신적인 모델 덕분에 윈도우 95 및 그 이후의 WIMP 프로그래밍 모델에 쉽게 대응할 수 있다.
> '모든 것은 객체다' 로 요약할 수 있다.

### 자바의 단점.
- C/C++에 비해 애플리케이션을 실행하는 데 추가적으로 드는 비용 때문에 자바에 대한 반감이 있었다.
> 하드웨어가 발전하면서 프로그래머의 시간이 더욱 중요한 요소로 부각되었다.

### 프로그래밍 언어 생태계 변화.
- 빅데이터가 흥행하면서 멀티코어, 컴퓨팅 클러스터를 이용한 빅데이터에 효과적인 처리할 필요성이 커졌다.
- 즉, 병렬 프로세싱을 활용하는 방향성으로 변화되어 간다.

----------------------------------------------------------------------------------------------------------------

> ## 스트림 처리.

### 스트림 처리 stream processing.
- 한 번에 한 개씩 만들어지는 연속적인 데이터 항목들의 모임.
- 이론적으로는 입력스트림에서 한 개의 데이터를 읽어 들이며 출력 스트림으로 데이터를 한 개씩 기록한다.
- 어떤 프로그램의 출력 스트림은 다른 프로그램의 입력 스트림이 될 수 있다.
> 여러가지 입/출력 명령을 하나로 묶어서 한번에 처리할 수 있다.

### 자바 스트림.
- 자바 8에는 java.util.stream 패키지에 스트림 API가 추가되었다.
- Stream<T>는 T 형식으로 구성된 일련의 항목을 의미한다.
- 스트림 API는 파이프라인을 만드는 데 필요한 많은 메서드를 제공한다.
- 스레드라는 복잡한 작업을 사용하지 않으면서도 공짜로 병렬성을 얻을 수 있다.

----------------------------------------------------------------------------------------------------------------

> ## 동작 파라미터화로 메서드에 코드 전달하기.

### 동작 파라미터화 behavior parameterization.
- 메서드(우리 코드)를 다른 메서드의 인수로 넘겨주는 기능을 의미한다.
- 스트림 API는 연산의 동작을 파라미터화할 수 있는 코드를 전달한다는 사상에 기초한다.
- 자세한 내용은 뒤에서 배운다.

----------------------------------------------------------------------------------------------------------------

> ## 병렬성과 공유 가변 데이터.

### 스트림 실행방식.
- 병렬성을 얻는 대신 스트림 메서드로 전달하는 코드의 동작 방식을 조금 바꿔야 한다.
- 스트림 메서드로 전달하는 코드는 다른 코드와 동시에 실행하더라도 안전하게 실행될 수 있어야 한다.
- 보통 다른 코드와 동시에 실행하더라도 안전하게 실행할 수 있는 코드를 만들려면 공유된 가변 데이터에 접근하지 않아야 한다.

### 순수함수 pure function.
- 부작용 없는 함수 side-effect-free function, 상태 없는 함수 stateless function 이라고 부른다.

### 함수형 프로그래밍 핵심 사항.
1. 공유되지 않은 가변 데이터 no shared mutable data.
2. 함수(메서드) 코드를 다른 메서드로 전달하는 기능.

----------------------------------------------------------------------------------------------------------------

> ## 자바 함수.

### 프로그래밍 언어에서 함수 function.
- 정적 메서드와 같은 의미로 사용된다.

### 자바 함수.
- 프로그래밍 언어에서 함수에 의미에 더해 수학적인 함수처럼 사용되며 부작용을 일으키지 않는 함수를 의미한다.

### 일급 시민
- 다른 데이터에 일반적으로 적용 가능한 연산을 모두 지원하는 것을 의미한다.

### 일급 시민의 조건.
- 변수에 담을 수 있어야 한다.
- 인자로 전달할 수 있다.
- 반환값으로 전달할 수 있다.

### 메서드 참조 method reference.
    // 예시코드.
    File[] hiddenFiles = new File(".").listFiles(File::isHidden);
- 자바 8에 추가된 새로운 기능이다.
- '::' 를 통해 이 메서드를 값으로 사용하라 라는 의미를 나타낸다.

### 메서드 참조 특징.
- 메서드 참조를 사용하면 자바에서 메서드는 일급값으로 사용할 수 있다.

### 람다 : 익명 함수.
- 익명함수를 일급 함수로 취급하여 값으로 전달할 수 있다.
- 이용할 수 있는 편리할 클래스나 메서드가 없을 때 람다 문법을 이용하여 간결하게 코드를 구현할 수 있다.
- 람다 문법 형식으로 구현된 프로그램을 '함수형 프로그래밍' 이라고 한다.

### 프리디케이트 predicate 란 무엇인가 ?
- 인수로 값을 받아 true/false 를 반환하는 함수.

### 메서드 전달에서 람다로.
- 메서드를 값으로 전달하는 것은 유용한 기능이지만, 한두 번만 사용할 메서드는 매번 정의하지 않고 람다를 통해 구현한다.
- 람다가 몇 줄 이상으로 길어진다면 메서드를 정의하는 것이 좋다. (코드의 명확성)

----------------------------------------------------------------------------------------------------------------

> ## 스트림.

### 반복의 종류.
- 외부 반복 external iteration.
  - for-each 루프를 이용해서 각 요소를 반복하면서 작업을 수행하는 방법.
- 내부 반복 internal iteration.
  - 스트림 API는 라이브러리 내부에서 모든 데이터를 처리한다.
  
### 스트림 장점.
- 많은 데이터를 컬렉션으로 처리하는 경우 병렬 처리가 가능한 스트림을 통해 빠른 데이터 처리를 할 수 있다.
- 자바에서 스레드 API로 멀티쓰레딩 코드를 구현하는 것은 어려운데, 스트림을 통해 이 문제를 해결했다.
- 프로세서가 여러개인 CPU인 경우, 컬렉션 리스트의 앞부분을 CPU1이 처리하고, 뒷부분을 CPU2가 처리하도록 forking step 할 수 있다.

----------------------------------------------------------------------------------------------------------------

> ## 디폴트 메서드와 자바 모듈.

### 인터페이스 디폴트 메서드 활용.
- 인터페이스에 새로운 메서드를 추가하려면 인터페이스를 구현한 모든 클래스에 메서드를 추가해야 했다.
- 이러한 문제점을 해결하기 위해 디폴트 메서드가 만들어졌다.
- ex) List sort()메서드.

### 자바 9의 모듈 시스템.
- 모듈을 정의하는 문법을 제공하므로 이를 이용해 패키지 모음을 포함하는 모듈을 정의할 수 있다.

----------------------------------------------------------------------------------------------------------------

> ## 함수형 프로그래밍에서 가져온 다른 유용한 아이디어.

### Optional<T>
- NullPointer 예외를 피할 수 있도록 도와주는 클래스이다.

### 패턴 매칭.
- switch를 확장한 것으로 데이터 형식 분류와 분석을 한 번에 수행할 수 있다.
- 뒤에서 자세히 배움.

### 왜 자바 switch에는 문자열, 기본값만 사용할 수 있는가 ?
- TableSwitch, LookupSwitch
- https://shanepark.tistory.com/395

### 정리.
- 언터 생태계의 모든 언어는 변화해서 살아남거나 그대로 머물면서 사라지게 된다.
- 자바8 프로그램은 더 효과적이고 간결하게 구현할 수 있는 새로운 개념과 기능을 제공한다.
- 기존의 자바 프로그래밍 기법으로는 멀티코어 프로세서를 온전히 활용하기 어렵다.
- 함수는 일급값이다. 메서드를 어떻게 함수형값으로 넘겨주는지, 익명 함수를 어떻게 구현하는지 기억하자.
- 자바8의 스트림 개념 중 일부는 컬렉션에서 가져온 것이다. 스트림 + 컬렉션은 병렬처리를 가능하게 한다.
- 자바9에서는 모듈을 이용해 시스템의 구조를 만들 수 있다.
- 함수형 프로그래밍에서 null 처리 방법과 패턴 매칭 활용 등 새로운 기법을 발견했다.






