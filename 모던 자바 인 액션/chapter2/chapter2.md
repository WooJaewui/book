
# 동작 파라미터화 코드 전달하기.

---------------------------------------------------------------------------------------------------------------

> ## 변화하는 요구사항에 대응하기. 

### 동작 파라미터화.
- 아직은 어떻게 실행할 것인지 결정되지 않은 코드 블록을 의미한다.
- 코드 블록의 실행이 나중으로 미뤄진다.
- 자주 바뀌는 요구사항에 효과적으로 대응할 수 있다.

### 리팩터링 시도.
1. 기존 메서드에 새로운 기능을 추가해야 될 경우 새로운 메서드를 추가한다.
   - 중복된 코드가 발생된다 -> 거의 비슷한 코드가 반복 존재한다면 그 코드를 추상화한다.
2. 상태값을 파라미터화한다.
   - 상태값이 여러개 생성되면 메서드를 이해하기 너무 어려워진다.
   - 새로운 상태값이 생기면 중복 코드가 발생된다.
3. 가능한 모든 속성으로 필터링한다.

---------------------------------------------------------------------------------------------------------------

> ## 동작 파라미터화.

### 동작 파라미터화 - 전략 디자인 패턴.
- 각 전략(알고리즘)을 캡슐화하는 알고리즘 패밀리를 정의해둔 다음에 런타임에 알고리즘을 선택하는 기법.
- 예시) ApplePredicate 인터페이스에 test()메서드를 만들고, 여러 구현체를 만들어서 test()를 오버라이드한다.
 
### 코드/동작 전달하기.
- ApplePredicate 인터페이스와 내가 원하는 코드를 구현한 구현체를 통해 메서드를 전달할 수 있다.
- 메서드는 객체만 인수로 받으므로 test 메서드를 ApplePredicate 객체로 감싸서 전달해야 한다.
- 하지만, test 메서드를 구현하는 객체를 이용해서 불리언 표현식 등을 전달할 수 있으므로 이는 '코드를 전달'하는 것과 같다.

### 한 개의 파라미터, 다양한 동작.
- 컬렉션 탐색 로직과 각 항목에 적용할 동작을 분리할 수 있다는 것이 동작 파라미터화의 강점이다.

---------------------------------------------------------------------------------------------------------------

> ## 복잡한 구조 간소화.

### 익명 클래스.
- 자바의 지역 클래스(블록 내부에 선언된 클래스)와 비슷한 개념이다.
- 자바는 클래스의 선언과 인스턴스화를 동시에 수행할 수 있도록 익명 클래스라는 기법을 제공한다.
- 즉, 즉석에서 필요한 구현을 만들어서 사용할 수 있다.
- 한 번만 사용할 구현체를 메서드의 인자로 보내줄 수 있다.  

### 익명 클래스의 단점.
1. 익명 클래스는 여전히 많은 공간을 차지한다.
2. 많은 프로그래머가 익명 클래스의 사용에 익숙하지 않다.

### 람다 사용.
- 3장에서 람다 표현식을 통해 더 간단한 코드 전달 기법을 도입해서 문제를 해결한다.
- 제네릭을 사용해서 타입을 추상화한 후 람다를 사용하면 유연하고 간결한 코드를 작성할 수 있다.

---------------------------------------------------------------------------------------------------------------

> ## 실전 예제.

### sort 사용 주의사항.
- 기본형 타입의 변수들은 compareTo() 할 수 없다. (제네릭은 참조형만 사용할 수 없다)

### ExecutorService 인터페이스.
- 태스크 제출과 실행 과정의 연관성을 끊어준다.
- 태스크를 쓰레드 풀로 보내고 결과를 Future로 저장할 수 있다.
- Runnable의 업그레이드 버전이라고 말할 수 있다.

### 정리.
- 동작 파라미터화에서는 메서드 내부적으로 다양한 동작을 수행할 수 있도록 코드를 메서드 인수로 전달한다.
- 동작 파라미터화를 이용하면 변화하는 요구사항에 더 잘 대응할 수 있는 코드를 구현할 수 있으며 나중에 엔지니어링 비용을 줄일 수 있다.
- 코드 전달 기법을 이용하면 동작을 메서드의 인수로 전달할 수 있다.
- 자바 API의 많은 메서드는 정렬, 스레드, GUI 처리 등을 포함한 다양한 동작으로 파라미터화할 수 있다.












