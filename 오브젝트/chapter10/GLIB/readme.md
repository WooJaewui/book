
# 상속과 코드 재사용.

------------------------------------------------------------------------------------------------------------

> ## 상속과 중복 코드.

### 재사용 관점에서 객체지향 프로그래밍 방법.
1. 상속.
   - 클래스 안에 정의된 인스턴스 변수와 메서드를 자동으로 새로운 클래스에 추가하는 구현 기법.
2. 합성.
   - 새로운 클래스의 인스턴스 안에 기존 클래스의 인스턴스를 포함시키는 방법.

### DRY 원칙.
- 반복하지 마라라는 뜻의 Don't Repeat Yourself 의 첫 글자를 모아 만든 용어로 동리한 지식을 중복하지 말라는 의미이다.
- 모든 지식은 시스템 내에서 단일하고, 애매하지 않고, 정말로 믿을 만한 표현 양식을 가져야 한다.
- 코드 안에 중복이 존재해서는 안 된다는 의미이다.

### 상속 주의사항 1.
- 자식 클래스의 메서드 안에서 super 참조를 이용해 부모 클래스의 메서드를 직접 호출할 경우 두 클래스는 강하게 결합된다.
- super 호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.

------------------------------------------------------------------------------------------------------------

> ## 취약한 기반 클래스 문제.

### 취약한 기반 클래스.
- 상속 관계로 연결된 자식 클래스가 부모 클래스의 변경에 취약해지는 현상.
- 취약한 기반 클래스 문제는 코드 재사용을 목적으로 상속을 사용할 때 발생하는 가장 대표적인 문제다.

### 상속의 특징.
- 상속은 자식 클래스를 점진적으로 추가해서 기능을 확장하는 데 용이하다.
- 상속은 높은 결합도로 인해 부모 클래스를 점진적으로 개선하는 것은 어렵게 만든다.

### 취약한 기반 클래스 문제.
- 캡슐화를 약화시키고 결합도를 높인다.

### 불필요한 인터페이스 상속 문제.
- 인터페이스 설계는 제대로 쓰기엔 쉽게, 잘못 쓰기엔 어렵게 만들어야 한다.

### 상속 주의사항 2.
- 상속받은 부모 클래스의 메서드가 자식 클래스의 내부 구조에 대한 규칙을 깨트릴 수 있다.

------------------------------------------------------------------------------------------------------------

> ## 메서드 오버라이딩의 오작용 문제.

### 상속 주의사항 3.
- 자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래스가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.
- 상속하려는 클래스의 메서드가 같은 클래스의 다른 메서드를 호출하는지에 대해 문서화해야 한다.
- 오버라이딩 가능한 메서드를 호출할 수 있는 어떤 상황에 대해서도 문서화해야 한다.
- 서브클래스가 안전할 수 있게끔 클래스를 문서화하려면 클래스의 상세 구현 내역을 기술해야 한다.

### 정리.
- 설계는 트레이드오프 활동이다.
- 상속은 코드 재사용을 위해 캡슐화를 희생한다.
- 완벽한 캡슐화를 원한다면 코드 재사용을 포기하거나 상속 이외의 다른 방법을 사용해야 한다.

------------------------------------------------------------------------------------------------------------

> ## 부모 클래스와 자식 클래스의 동시 수정 문제.

### 상쇽에서 결합도 문제.
- 결합도란 다른 대상에 대해 알고 있는 지식의 양이다.
- 상속은 기본적으로 부모 클래스의 구현을 재사용한다는 기본 전제를 따르기 때문에 자식 클래스가 부모 클래스의 내부에 대해 잘 안다.

### 조슈아 블로치의 조언.
- 서브클래스는 올바른 기능을 위해 슈퍼클래스의 세부적인 구현에 의존한다.
- 슈퍼클래스의 구현은 릴리스를 거치면서 변경될 수 있고, 그에 따라 서브클래스의 코드를 변경하지 않더라도 깨질 수 있다.
- 슈퍼클래스의 작성자가 확장될 목적으로 특별히 그 클래스를 설계하지 않았다면 서브클래스는 슈퍼클래스와 보조를 맞춰서 진화해야 한다.

### 상속 주의사항 4.
- 클래스를 상속하면 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나, <br>
  자식 클래스와 부모 클래스를 동시에 변경하거나 둘 중 하나를 선택할 수밖에 없다.

------------------------------------------------------------------------------------------------------------

> ## Phone 다시 살펴보기.

### 코드 중복을 제거하기 위한 상속의 원칙.
1. 두 메서드가 유사하게 보인다면 차이점을 메서드로 추출하라.
  - 메서드 추출을 통해 두 메서드를 동일한 형태로 보이도록 만들 수 있다.
2. 부모 클래스의 코드를 하위로 내리지 말고 자식 클래스의 코드를 상위로 올려라.
  - 부모 클래스의 구체적인 메서드를 자식 클래스로 내리는 것보다 자식 클래스의 추상적인 메서드를 부모 클래스로 올리는 것이 좋다.

### 인스턴스 변수 추가.
- 책임을 아무리 잘 분리하더라도 인스턴스 변수의 추가는 종종 상속 계층 전반에 걸친 변경을 유발한다.

### 정리.
- 상속으로 인한 클래스 사이의 결합을 피할 수 있는 방법은 없다.
- 상속은 어떤 방식으로든 부모 클래스와 자식 클래스를 결합시킨다.
- 메서드 구현에 대한 결합은 추상 메서드를 추가함으로써 어느 정도 완화할 수 있다.
- 인스턴스 변수에 대한 잠재적인 결합을 제거할 수 있는 방법은 없다.

------------------------------------------------------------------------------------------------------------

> ## 차이에 의한 프로그래밍.

### 차이에 의한 프로그래밍 programming by difference.
- 기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장하는 방법.
- 상속을 이용하면 이미 존재하는 클래스의 코드를 쉽게 재사용할 수 있기 때문에 애플리케이션의 점진적인 정의가 가능해진다.

### 차이에 의한 프로그래밍의 목표.
- 중복 코드를 제거하고 코드를 재사용하는 것이다.
- 재사용 가능한 코드란 심각한 버그가 존재하지 않는 코드다.

### 상속.
- 객체지향 세계에서 중복 코드를 제거하고 코드를 재사용할 수 있는 가장 유명한 방법은 상속이다.
- 여러 클래스에 공통적으로 포함돼 있는 중복 코드를 하나의 클래스로 모은다.
- 원래 클래스들에서 중복 코드를 제거한 후 중복 코드가 옮겨진 클래스를 상속 관계로 연결한다.
- 코드를 컴파일하면 무대 뒤에서 마법이 일어나 상속 관계로 연결된 코드들이 하나로 합쳐진다.
- 따라서 상속을 사용하면 여러 클래스 사이에서 재사용 가능한 코드를 하나의 클래스 안으로 모을 수 있다.

### 정리.
- 상속을 이용하면 새로운 기능을 추가하기 위해 직접 구현해야 하는 코드의 양을 최소화할 수 있다.
- 시간이 흐르고 객체지향에 이해가 깊어지면서 사람들은 코드를 재사용하기 위해 상속을 사용하는 것이 위험하다는 사실을 깨달았다.
- 상속의 오용과 남용은 애플리케이션을 이해하고 확장하기 어렵게 만든다.
- 상속은 정말 필요한 부분만 사용하고 합성을 통해 코드를 작성하자.





