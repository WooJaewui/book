
# 단위테스트

------------------------------------------------------------------------------------------------------------------------

> ## TDD 법칙 세 가지

### TDD 법칙
1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다

------------------------------------------------------------------------------------------------------------------------

> ## 깨끗한 테스트 코드 유지하기

### 테스트 코드를 어떻게 관리할 것인가
- 테스트 코드에는 컨벤션을 지키지 않고 작성한다
  - 작성 시간이 줄어들지만 테스트 코드 변경 시 어려움을 겪을 수 있다
- 테스트 코드에도 컨벤션을 지키고 깔끔하게 작성한다
  - 작성 시간이 늘어나지만 테스트 코드 변경 시 유리


### 단위 테스트 필요성
- 아키텍처, 설계가 아무리 유연하더라도 테스트 케이스가 없으면 개발자는 변경을 주저한다 (버그가 발생할까봐) 

------------------------------------------------------------------------------------------------------------------------

> ## 깨끗한 테스트 코드

### 깨끗한 테스트 코드를 만들기 위한 조건
- 가독성
- 가독성은 실제 코드보다 테스트 코드에 더더욱 중요할 수 있다


### 가독성을 높이기 위한 방법
- 일반 코드와 마찬가지로 명료성, 단순성, 풍부한 표현력이 필요하다


### 도메인 특화 언어 DSL
- 시스템 조작 API를 사용하는 대신 API 위에다 함수와 유틸리티를 구현한 후 그 함수를 사용하는 방법
- 테스트를 구현하는 당사자와 나중에 테스트를 읽어볼 독자를 도와주는 테스트 언어라고 할 수 있다

------------------------------------------------------------------------------------------------------------------------

> ## 테스트 당 assert 하나

### 테스트 당 assert 하나 장점
- 결론이 하나라서 코드를 이해하기 쉽고 빠르다


### 정리
- assert 문 개수는 최대한 줄이는 것이 좋다

------------------------------------------------------------------------------------------------------------------------

> ## F.I.R.S.T

### 깨끗한 테스트의 5가지 규칙 FIRST
- 빠르게 F Fast
  - 테스트는 빨라야 한다
- 독립적으로 I Independent
  - 각 테스트는 서로 의존하면 안 된다
  - 한 테스트가 다음 테스트의 실행될 환경을 준비해서는 안 된다
- 반복가능하게 R Repeatable
  - 테스트는 어떤 환경에서도 반복 가능해야 한다
- 자가검증하는 S Self-Validating
  - 테스트는 부울 값으로 결과를 내야 한다
  - 스스로 성공과 실패를 가늠ㅅ하지 않는다면 판단은 주관적이 되기 때문에 수작업 평가가 필요하게 된다
- 적시에 T Timely
  - 테스트는 적시에 작성해야 한다
  - 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다
  - 실제 코드를 구현한 다음에 테스트 코드를 만들면 실제 코드가 테스트하기 어렵다는 사실을 발견할지도 모른다


### 결론
- 테스트 코드는 실제 코드만큼이나 프로젝트에 중요하다
- 도메인 특화 언어 DSL을 만들어 테스트 코드를 쉽게 짜도록 만들자
- 테스트 코드를 깨끗하게 유지하자


